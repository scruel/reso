(()=>{var e={};e.id=62,e.ids=[62],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},7962:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>l,routeModule:()=>h,tree:()=>d});var s=t(260),a=t(8203),n=t(5155),i=t.n(n),o=t(7292),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);t.d(r,c);let d=["",{children:["test-backend",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8961)),"/Users/alichen/Downloads/agent_workspace/ecommerce-search-main/frontend/src/app/test-backend/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1354)),"/Users/alichen/Downloads/agent_workspace/ecommerce-search-main/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,42)),"/Users/alichen/Downloads/agent_workspace/ecommerce-search-main/frontend/src/app/not-found.tsx"]}],l=["/Users/alichen/Downloads/agent_workspace/ecommerce-search-main/frontend/src/app/test-backend/page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/test-backend/page",pathname:"/test-backend",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3255:(e,r,t)=>{Promise.resolve().then(t.bind(t,8961))},7167:(e,r,t)=>{Promise.resolve().then(t.bind(t,6517))},6517:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(5512),a=t(8009),n=t(9586);function i(){let[e,r]=(0,a.useState)([]),[t,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),d=async(e,t)=>{i(!0);try{console.log(`🧪 Testing: ${e}`);let s=await (0,n.apiGet)(e);console.log(`✅ Success:`,s),r(r=>[...r,{endpoint:e,description:t,status:"success",data:s,timestamp:new Date().toLocaleTimeString()}])}catch(s){console.error(`❌ Error:`,s),r(r=>[...r,{endpoint:e,description:t,status:"error",error:s.message,timestamp:new Date().toLocaleTimeString()}])}i(!1)},l=async()=>{r([]),c(null),await d("/health","健康检查"),await d("/api/products","获取产品列表"),await d("/api/thread?tid=1","获取产品详情 (ID: 1)"),await d("/api/vibe?query=手机",'意图识别 (查询: "手机")'),await d("/api/vibe","意图识别 (无查询)")};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"后端API连接测试"}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"测试状态"}),(0,s.jsx)("button",{onClick:l,disabled:t,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50",children:t?"测试中...":"重新测试"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[e.map((e,r)=>(0,s.jsxs)("div",{className:`p-4 rounded-lg border-l-4 ${"success"===e.status?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:`font-medium ${"success"===e.status?"text-green-800":"text-red-800"}`,children:e.description}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.timestamp})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:(0,s.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:e.endpoint})}),"success"===e.status?(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[(0,s.jsx)("p",{className:"text-green-600 font-medium mb-2",children:"✅ 成功响应"}),(0,s.jsx)("pre",{className:"text-gray-700 overflow-x-auto",children:JSON.stringify(e.data,null,2)})]}):(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[(0,s.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"❌ 错误信息"}),(0,s.jsx)("p",{className:"text-red-700",children:e.error})]})]},r)),0===e.length&&!t&&(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:'点击"重新测试"开始API连接测试'})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCCB 测试说明"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,s.jsxs)("li",{children:["• 后端服务器: ",(0,s.jsx)("code",{children:"http://demo.scruel.com:8000"})]}),(0,s.jsx)("li",{children:"• 测试包括健康检查、产品列表、产品详情和意图识别"}),(0,s.jsx)("li",{children:"• 绿色表示成功，红色表示失败"}),(0,s.jsx)("li",{children:"• 查看浏览器控制台获取更多调试信息"})]})]})]})})})}},9586:(e,r,t)=>{"use strict";async function s(e){try{console.log("\uD83D\uDD0D 调用后端 thread API，ID:",e);let r=await i(`/api/thread?tid=${e}`);if(console.log("\uD83D\uDCE1 后端 thread API 原始响应:",r),void 0!==r.status){if(0===r.status){let e={title:r.title,pic_url:r.pic_url,price:r.price,brand:r.brand,category:r.category,reference_links:Array.isArray(r.reference_links)?r.reference_links.join(", "):r.reference_links||"",dchain:r.dchain?{id:r.dchain.id.toString(),description:r.dchain.description,tbn_url:r.dchain.tbn_url,user_nick:r.dchain.user_nick}:void 0};return console.log("✅ 后端 thread API 响应已处理:",e),e}throw Error(`Backend error: ${r.message||"Unknown error"}`)}if(r.success&&r.data){let e=r.data;return e.dchain&&"number"==typeof e.dchain.id&&(e.dchain.id=e.dchain.id.toString()),e}if(!r.success&&!r.error)return r.dchain&&"number"==typeof r.dchain.id&&(r.dchain.id=r.dchain.id.toString()),r;if(r.error){let e=Error(r.error.message||"API錯誤");throw e.name=r.error.type||"ApiError",e}throw Error("無效的API響應格式")}catch(e){throw console.error("Failed to fetch thread detail:",e),e}}t.r(r),t.d(r,{apiDelete:()=>d,apiGet:()=>i,apiPost:()=>o,apiPut:()=>c,apiRequest:()=>n,fetchThreadDetail:()=>s,getApiUrl:()=>a});let a=e=>e.startsWith("/api/vibe")||e.startsWith("/api/thread")||e.startsWith("/api/products")?`http://demo.scruel.com:8000${e}`:e,n=async(e,r={})=>{let t=a(e),s={headers:{"Content-Type":"application/json",...r.headers},...r};try{let e=await fetch(t,s);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error(`API request failed for ${t}:`,e),e}},i=e=>n(e,{method:"GET"}),o=(e,r)=>n(e,{method:"POST",body:JSON.stringify(r)}),c=(e,r)=>n(e,{method:"PUT",body:JSON.stringify(r)}),d=e=>n(e,{method:"DELETE"})},8961:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/alichen/Downloads/agent_workspace/ecommerce-search-main/frontend/src/app/test-backend/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/alichen/Downloads/agent_workspace/ecommerce-search-main/frontend/src/app/test-backend/page.tsx","default")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[989,951,154],()=>t(7962));module.exports=s})();